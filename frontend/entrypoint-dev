#!/bin/bash
set -e

# Start frontend dev server directly (SonarQube disabled)
exec npm run dev

# If you want to re-enable SonarQube scanning in dev, you can replace the
# simple startup above with the original flow below:
#
# until curl -u ${SONAR_USER}:${SONAR_PWD} -s http://sonarqube:9000/api/system/health | grep -q '"health":"GREEN"'; do
#   echo "Waiting for SonarQube..."
#   sleep 5
# done
#
# if [ -f /token/sonar.env ]; then
#   export $(cat /token/sonar.env | xargs)
# fi
#
# sonar-scanner \
#   -Dsonar.projectKey=mediaJira_Frontend \
#   -Dsonar.sources=/app \
#   -Dsonar.host.url=http://sonarqube:9000 \
#   -Dsonar.login=$SONAR_TOKEN || echo "Sonar scan skipped or failed"